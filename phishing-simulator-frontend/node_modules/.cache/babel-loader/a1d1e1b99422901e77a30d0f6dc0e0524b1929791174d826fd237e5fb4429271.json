{"ast":null,"code":"// src/components/Login.jsx\nimport React,{useState}from'react';import{Link,useLocation}from'react-router-dom';import axios from'axios';import'../style.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=_ref=>{var _location$state;let{onLogin,message}=_ref;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[errorMsg,setErrorMsg]=useState('');// 1) Get location to check if we came from Register with success\nconst location=useLocation();const registrationSuccess=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.registrationSuccess;const handleSubmit=async e=>{e.preventDefault();setErrorMsg('');try{const response=await axios.post('/api/login',{username,password});if(response.data.error==='USER_NOT_FOUND'){setErrorMsg('User does not exist');}else if(response.data.error==='INCORRECT_PASSWORD'){setErrorMsg('This login attempt failed due to incorrect password');}else{if(onLogin){onLogin({username,password});}}}catch(err){console.error(err);setErrorMsg('An error occurred while logging in.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),message&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:message}),errorMsg&&/*#__PURE__*/_jsx(\"div\",{className:\"floating-error\",children:errorMsg}),registrationSuccess&&/*#__PURE__*/_jsx(\"div\",{className:\"floating-success\",children:\"Registration successfully completed!\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"Username\",required:true,value:username,onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",required:true,value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Register here\"})]})]});};export default Login;","map":{"version":3,"names":["React","useState","Link","useLocation","axios","jsx","_jsx","jsxs","_jsxs","Login","_ref","_location$state","onLogin","message","username","setUsername","password","setPassword","errorMsg","setErrorMsg","location","registrationSuccess","state","handleSubmit","e","preventDefault","response","post","data","error","err","console","className","children","style","color","onSubmit","type","name","placeholder","required","value","onChange","target","to"],"sources":["C:/College work/PythonPhishingSimulator/phishing-simulator-frontend/src/components/Login.jsx"],"sourcesContent":["// src/components/Login.jsx\r\nimport React, { useState } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport '../style.css';\r\n\r\nconst Login = ({ onLogin, message }) => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n\r\n  // 1) Get location to check if we came from Register with success\r\n  const location = useLocation();\r\n  const registrationSuccess = location.state?.registrationSuccess;\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setErrorMsg('');\r\n\r\n    try {\r\n      const response = await axios.post('/api/login', { username, password });\r\n      if (response.data.error === 'USER_NOT_FOUND') {\r\n        setErrorMsg('User does not exist');\r\n      } else if (response.data.error === 'INCORRECT_PASSWORD') {\r\n        setErrorMsg('This login attempt failed due to incorrect password');\r\n      } else {\r\n        if (onLogin) {\r\n          onLogin({ username, password });\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setErrorMsg('An error occurred while logging in.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>Login</h2>\r\n      {message && <p style={{ color: 'red' }}>{message}</p>}\r\n\r\n      {errorMsg && (\r\n        <div className=\"floating-error\">\r\n          {errorMsg}\r\n        </div>\r\n      )}\r\n\r\n      {/* 2) If registration was successful, display a success message */}\r\n      {registrationSuccess && (\r\n        <div className=\"floating-success\">\r\n          Registration successfully completed!\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <input \r\n          type=\"text\"\r\n          name=\"username\"\r\n          placeholder=\"Username\"\r\n          required\r\n          value={username}\r\n          onChange={e => setUsername(e.target.value)}\r\n        />\r\n        <input \r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Password\"\r\n          required\r\n          value={password}\r\n          onChange={e => setPassword(e.target.value)}\r\n        />\r\n        <button type=\"submit\">Login</button>\r\n      </form>\r\n      <p>Don't have an account? <Link to=\"/register\">Register here</Link></p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}